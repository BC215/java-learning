<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mybatis">

    <!-- 1. 전체 회원 조회 -->
    <select id="selectAllMember"
            resultType="member">
        select
            member_id,
            member_pw,
            member_name,
            member_phone,
            member_age,
            member_gender,
            enroll_date
        from member_tbl
        order by enroll_date desc
    </select>

    <!-- 2. 아이디로 회원 조회 -->
    <!-- parameterType이 String이므로 #{value} 사용 -->
    <select id="selectMemberId"
            parameterType="String"
            resultType="member">
        select
            member_id,
            member_pw,
            member_name,
            member_phone,
            member_age,
            member_gender,
            enroll_date
        from member_tbl
        where member_id = #{value}
    </select>

    <!-- 3. 회원 등록 -->
    <insert id="insertMember"
            parameterType="member">
        insert into member_tbl values (
            #{memberId},
            #{memberPw},
            #{memberName},
            #{memberPhone},
            #{memberAge},
            #{memberGender},
            sysdate
        )
    </insert>

    <!-- 4. 회원 정보 수정 -->
    <update id="updateMember"
            parameterType="member">
        update member_tbl
        set
            member_pw     = #{memberPw},
            member_name   = #{memberName},
            member_phone  = #{memberPhone},
            member_age    = #{memberAge},
            member_gender = #{memberGender}
        where member_id = #{memberId}
    </update>

    <!-- 5. 회원 삭제 -->
    <delete id="deleteMember"
            parameterType="String">
        delete
        from member_tbl
        where member_id = #{value}
    </delete>
    
    <!-- 6. 삭제 회원 del_member_tbl 추가 -->
<insert id="insertDelMember"
        parameterType="member">
    insert into del_member_tbl (
        member_id,
        member_name,
        out_date
    ) values (
        #{memberId},
        #{memberName},
        sysdate
    )
</insert>
    

</mapper>
